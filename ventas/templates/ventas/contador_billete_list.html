{% extends "base.html" %}
{% load static %}

{% block title %}| Listado del Contador de Billetes{% endblock title %}

{% block css %}
  <!-- link rel="stylesheet" href="{% static 'css/datatables-somethink.min.css' %}" / -->
  <link rel="stylesheet" href="{% static 'assets/lib/datatables/full/datatables.min.css' %}" />
  <link rel="stylesheet" href="{% static 'css/positivo.css' %}" />
  <style> 
   
    .modal-header {
        background-color: #0059be;
        color: white;
        display: flex;
        //flex-direction: column;
        //align-items: center;
        padding-top: 4px; /* Ajuste para acomodar la franja */
        //position: relative;
    }

    .modal-header::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 4px; /* Ancho de la franja amarilla */
        background-color: #fdb02b;;
    }
    .ancho {
        /* Asegurar que la segunda columna tenga un ancho fijo */
        td:nth-child(2), th:nth-child(2) {
            width: 450px !important;
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="az-dashboard-one-title">
    <div>
      <h2 class="az-dashboard-title">Listado del Contador de Billetes  Total de Efectivo: <span id="efectivo"></span>&nbsp;
        <button type="button" class="btn btn-info" data-bs-toggle="modal" data-bs-target="#detalles" onclick="total_billetes()">
        Detalle
        </button>
    </h2>
      <p class="az-dashboard-text">Las veces que contaste los billetes, ordenados por fechas.</p>
    </div>
    <div class="az-content-header-right">
        <a href="{% url 'calculadora_billetes' %}">
            <button class="btn btn-primary">Agregar</button>
        </a>
    </div>
  </div><!-- az-dashboard-one-title -->
 <div>
    {% if billetes %}
        <table id="tabla">
            <thead>
                <tr>
                    <th>Fecha</th>
                    <th>Comentario</th>
                    <th>Tipo</th>
                    <th>Monto</th>
                    <th>Sub Total</th>
                    <th>Acción</th>
                </tr>
            </thead>
            <tbody>
                {% for billete in billetes %}
                    <tr>
                        <td>{{ billete.fecha|date:"d/m/y H:i" }}</td>
                        <td>{{ billete.comentario }}</td>
                        <td style="text-align:center !important">{{ billete.tipo_cuenta.siglas }}</td>
                        <td>	
                            {% if billete.tipo_cuenta.siglas == "CR" %}
                                <span class="positivo">${{ billete.total }}</span>
                            {% else %}
                                <span class="negativo">${{ billete.total }}</span>
                            {% endif %}
                        </td>
                        <td>
                            {% if billete.sub_total > 0 %}
                                <span class="positivo">${{ billete.sub_total }}</span>
                            {% else %}
                                <span class="negativo">${{ billete.sub_total }}</span>
                            {% endif %}
                        </td>                        
                        <td>
                            <a href="{% url 'editar_calculadora_billetes' billete.id %}">
                                <button class='btn btn-primary'>Editar</button>
                            </a>
                            <button type="button" class="btn btn-info" data-bs-toggle="modal" data-bs-target="#detalles" onclick="billetes({{ billete.id }})">
                                Detalle
                            </button>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p>Aún no hay registros.</p>
    {% endif %}
 </div> 
<!-- BASIC MODAL -->
<div id="modaldemo1" class="modal" style="display: none;" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content modal-content-demo">
        <div class="modal-header">
          <h6 class="modal-title">Message Preview</h6>
          <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">×</span>
          </button>
        </div>
        <div class="modal-body">
          <h6>Why We Use Electoral College, Not Popular Vote</h6>
          <p>It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. </p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-indigo">Save changes</button>
          <button type="button" class="btn btn-outline-light" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div><!-- modal-dialog -->
  </div>

<!-- LARGE MODAL -->
<div id="detalles" class="modal">
    <div class="modal-dialog modal-xl" role="document">
        <div class="modal-content modal-content-demo">
            <div class="modal-header" style="justify-content: start !important;">
                <h6 class="modal-title mt-3">Detalles del pago</h6>
                <!-- button type="button" class="close mt-1" data-bs-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button -->
            </div>
            <div class="modal-body">
                <table id="" class="table">
                    <thead>
                        <tr style="text-align:center !important">
                            <th>Monto</th>
                            <th>$1</th>
                            <th>$3</th>
                            <th>$5</th>
                            <th>$10</th>
                            <th>$20</th>
                            <th>$50</th>
                            <th>$100</th>
                            <th>$200</th>
                            <th>$500</th>
                            <th>$1000</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td id="total" style="text-align:center !important"></td>
                            <td id="1" style="text-align:center !important"></td>
                            <td id="3" style="text-align:center !important"></td>
                            <td id="5" style="text-align:center !important"></td>
                            <td id="10" style="text-align:center !important"></td>
                            <td id="20" style="text-align:center !important"></td>
                            <td id="50" style="text-align:center !important"></td>
                            <td id="100" style="text-align:center !important"></td>
                            <td id="200" style="text-align:center !important"></td>
                            <td id="500" style="text-align:center !important"></td>
                            <td id="1000" style="text-align:center !important"></td>
                        </tr>
                    </tbody>
                </table>
            </div><!-- modal-body -->
            <div class="modal-footer">
                <button type="button" data-bs-dismiss="modal" class="btn btn-outline-light">Close</button>
            </div>
        </div>
    </div><!-- modal-dialog -->
</div><!-- modal -->
{% endblock content %}

{% block js %}
  <!-- script src="{% static 'js/jquery.min.js' %}"></script -->
  <!-- script src="{% static 'js/datatables-somethink.min.js' %}" type="text/javascript"></!-- -->
  <scrip src="{% static 'assets/lib/datatables/full/datatables.min.js' %}" type="text/javascript"></scrip>
  <script src="{% static 'js/moment.min.js' %}" type="text/javascript"></script>
  <script src="{% static 'js/language-dataTables.js' %}" type="text/javascript"></sc>
  <script>
    // Mostrar Efectivo
    /*
    var Efectivo = document.getElementById('efectivo')
    fetch('/api/saldo_efectivo/')
    .then(rest => rest.json())
    .then(dat => {
        const efec = dat[0].saldo
        if (efec > 0) {
            Efectivo.innerHTML = '<span class="positivo">$' + new Intl.NumberFormat().format(efec) + '</span>'
        } else {
            Efectivo.innerHTML = '<span class="positivo">$' + new Intl.NumberFormat().format(efec) + '</span>'
        }
    })
    */

    new DataTable('#tabla');

    // new DataTable('#tabla', {
    // var table = $('#tabla').DataTable({
    // $('#tabla').DataTable({
    //    language: language,
    //    pageLength: 20,
    //    order: [[0, 'desc']],
    //});
  </script>

  <script>
    
  </script>
{% endblock %}
